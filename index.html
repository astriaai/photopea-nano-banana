<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>NanoBanana for Photopea</title>
  <link rel="icon" href="icon.jpeg">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
</head>
<body class="p-4">
  <div id="auth" class="text-center">
    <p>In order to use this plugin, you will need to get a free API key from Astria with free credits</p>
    <a onclick="askAuth()" href="https://www.astria.ai/users/sign_in?redirect_to=/users/edit&aff=photopea" target="_blank" class="btn btn-primary btn btn-primary my-4">Get an API key</a>
  </div>

  <div id="main" class="hidden">
    <form id="prompt-form" class="form-control">
      <label class="label" for="prompt-input">Enter prompt</label>
      <input id="prompt-input" name="prompt" type="text" placeholder="Type prompt..." class="input input-bordered w-full" required />
      <button type="submit" class="btn btn-primary my-4">
        Submit
        <span id="spinner" class="ml-2 hidden">
        <span class="loading loading-spinner loading-sm text-primary" role="status" aria-label="Loading"></span>
      </span>
      </button>
    </form>
    <div id="preview-wrapper">
      <img id="preview-image" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="  />
    </div>
  </div>


  <footer role="contentinfo" class="mt-10 pt-6 text-sm flex flex-col sm:flex-row items-center justify-between gap-4">
    <div class="flex items-center gap-2">
      <span class="inline-flex items-center gap-1">
        <span>Built with</span>
        <span aria-label="love" class="text-error">❤️</span>
        <span>by</span>
        <a href="https://www.astria.ai" target="_blank" class="link link-primary">Astria</a>
      </span>
    </div>
    <a href="https://github.com/astriaai" target="_blank" class="flex items-center gap-2 link link-hover" aria-label="Astria on GitHub">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"class="w-5 h-5"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.012c0 4.424 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.01-1.022-.014-1.855-2.782.605-3.369-1.18-3.369-1.18-.454-1.154-1.11-1.462-1.11-1.462-.908-.621.069-.608.069-.608 1.004.07 1.533 1.032 1.533 1.032.892 1.53 2.341 1.088 2.91.833.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.447-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0 1 12 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.748-1.026 2.748-1.026.546 1.378.202 2.397.1 2.65.64.7 1.027 1.595 1.027 2.688 0 3.848-2.339 4.695-4.566 4.943.359.31.678.921.678 1.856 0 1.34-.012 2.42-.012 2.75 0 .268.18.58.688.482A10.019 10.019 0 0 0 22 12.012C22 6.484 17.523 2 12 2Z" clip-rule="evenodd"/></svg>
      <span>Open-sourced on GitHub</span>
    </a>
    <button id="signout" type="button" class="btn btn-ghost btn-sm hidden" onclick="signout()" aria-label="Log out">Log out</button>

  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.11.0/axios.min.js" integrity="sha512-h9644v03pHqrIHThkvXhB2PJ8zf5E9IyVnrSfZg8Yj8k4RsO4zldcQc4Bi9iVLUCCsqNY0b4WXVV4UB+wbWENA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.js" integrity="sha512-hOJ0mwaJavqi11j0XoBN1PtOJ3ykPdP6lp9n29WVVVVZxgx9LO7kMwyyhaznGJ+kbZrDN1jFZMt2G9bxkOHWFQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="photopeaContext.js"></script>
  <script src="imageUtil.js"></script>
  <script src="astriaSdk.js"></script>
  <script src="auth.js"></script>
  <script src="main.js"></script>
</body>
</html>
